document.addEventListener("DOMContentLoaded",()=>{const e=Joomla.getOptions("bcs-tracks"),t=document.getElementById("bcstracks-slider"),n={authors:e.authors.split(",")};fetch("index.php?option=com_ajax&module=tracks&method=getAuthorTracks&format=json",{method:"POST",body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{const n=e.data;Object.keys(n).forEach(e=>{const a=n[e],s=document.createElement("li"),o=document.createElement("a");o.setAttribute("href",`https://tm.mania-exchange.com/tracks/${a.TrackID}`),o.setAttribute("target","_blank");const c=document.createElement("span");c.innerHTML=a.GbxMapName;const d=document.createElement("div");d.classList.add("by"),d.innerHTML=`by ${a.Username}`;const r=document.createElement("div");r.classList.add("by"),r.innerText=`Uploaded ${a.UploadedAt}`;const l=document.createElement("svg");l.style.width="266px",l.style.height="193px",o.append(l);const m=new Image;m.src=a.screenshot,m.addEventListener("load",()=>{o.append(m),o.append(c),o.removeChild(l)},!1);const i=document.createElement("div");i.classList.add("uk-flex");const p=document.createElement("a");p.classList.add("uk-button","uk-button-primary","uk-button-small"),p.setAttribute("href",`https://tm.mania-exchange.com/tracks/download/${a.TrackID}`),p.innerText="Download";const u=document.createElement("a");if(u.classList.add("uk-button","uk-button-primary","uk-button-small","uk-margin-left"),u.setAttribute("href",`https://tm.mania-exchange.com/tracks/installandplay/${a.TrackID}`),u.innerText="Install & Play",i.append(p),i.append(u),s.append(o),s.append(d),s.append(r),a.magnets){const e=document.createElement("div");e.classList.add("magnet"),e.innerHTML="<strong>WARNING</strong>: Contains magnetic blocks!",s.append(e)}s.append(i),t.insertBefore(s,t.firstChild);const h=t.querySelector("li").height;t.style.minHeight=`${h}px`})}).then(e=>{const n=t.getElementsByClassName("placeholder");for(;n.length>0;)n[0].parentNode.removeChild(n[0])})})