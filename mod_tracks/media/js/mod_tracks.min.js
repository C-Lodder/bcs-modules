(()=>{const e=Joomla.getOptions("bcs-tracks"),t=document.getElementById("bcstracks-slider"),n={authors:e.authors.split(",")};fetch("index.php?option=com_ajax&module=tracks&method=getAuthorTracks&format=json",{method:"POST",body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{const n=e.data;Object.keys(n).forEach((e=>{const a=n[e],s=document.createElement("div"),d=document.createElement("a");d.setAttribute("href",`${a.endpoint}/maps/${a.TrackID}`),d.setAttribute("target","_blank");const o=document.createElement("span");o.classList.add("flex","align-items-center","flex-wrap"),o.innerHTML=a.GbxMapName;const c=new Image,r="Trackmania"===a.TitlePack?"Trackmania":"TMStadium";c.src=`media/mod_tracks/img/${r}.webp`,c.classList.add("mx-logo"),c.addEventListener("load",(()=>{o.prepend(c)}),!1);const i=document.createElement("div");i.classList.add("by"),i.innerHTML=`by ${a.Username}`;const l=document.createElement("div");l.classList.add("by"),l.innerText=`Uploaded ${a.UploadedAt}`;const m=new Image;m.src=a.screenshot,m.classList.add("screenshot"),m.addEventListener("load",(()=>{d.prepend(m)}),!1),d.append(o);const p=document.createElement("div");p.classList.add("flex","flex-wrap","justify-content-between");const h=document.createElement("a");h.classList.add("btn","btn-sm"),h.setAttribute("href",`${a.endpoint}/maps/download/${a.TrackID}`),h.innerText="Download";const u=document.createElement("a");u.classList.add("btn","btn-sm"),u.setAttribute("href",`${a.endpoint}/maps/installandplay/${a.TrackID}`),u.innerText="Install & Play",p.append(h),p.append(u),s.append(d),s.append(i),s.append(l),s.append(p),t.insertBefore(s,t.firstChild);const b=t.querySelector("div").height;t.style.minHeight=`${b}px`}))})).then((()=>{const e=t.getElementsByClassName("placeholder");for(;e.length>0;)e[0].parentNode.removeChild(e[0])}))})();